# 高级配置指南 (`config.json`)

你好！本文档旨在帮助你了解 `config.json` 文件的作用。

## `config.json` 是什么？

`config.json` 是本工具的配置文件，它以 JSON 格式存储了你的所有设置，包括连接方式、上次使用的校准方案等。

通常情况下，你**不需要**手动编辑这个文件，通过程序的图形界面进行操作即可。

文件位于你运行 `.exe` 的相同目录下。

## 文件结构和字段说明

一个典型的 `config.json` 文件看起来像这样：

```json
{
    "type": "mumu",
    "install_path": "D:/Game/Android/MuMuPlayer-12.0/shell",
    "instance_index": 0,
    "active_calibration_profile": "正常速度_30f_2560x1440.json",
    "api_port": 2606
}
```

下面是每个字段的详细说明：

| 键 (Key)                      | 类型 (Type) | 必需?                  | 描述                                                                                                                                                                              |
|:-----------------------------|:----------|:---------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `type`                       | 字符串       | **是**                | 指定连接模拟器的方式。`"mumu"` 表示使用 MuMu 模拟器12 的专用接口，`"minicap"` 表示使用通用的 ADB 截图方式。                                                                                                         |
| `install_path`               | 字符串       | 当 `type` 为 "mumu"    | **MuMu模拟器12 的安装路径**。程序会基于此路径寻找必要的 `dll` 文件。                                                                                                                                     |
| `instance_index`             | 整数        | 否 (默认为 `0`)          | **MuMu模拟器12 的实例索引**。如果你使用了 MuMu 多开器，`0` 通常代表第一个模拟器，`1` 代表第二个，以此类推。                                                                                                              |
| `device_id`                  | 字符串       | 否                    | **ADB 设备 ID**。当 `type` 为 `"minicap"` 时使用。如果留空，程序会自动检测连接的第一个 ADB 设备。例如 `"127.0.0.1:5555"`。                                                                                       |
| `active_calibration_profile` | 字符串       | 否                    | **上次使用的校准文件名**。程序启动时会尝试自动加载这个配置文件。                                                                                                                                              |
| `api_port`                   | 整数        | 否 (默认为 `2606`)       | **WebSocket API 的监听端口号**。主要用于解决端口冲突，例如当您想同时运行本程序的多个实例时。                                                                                                                         |
| `frame_display_mode`         | 字符串       | 否 (默认为 `"0_to_n-1"`) | **帧数显示模式**。此设置控制悬浮窗上帧数的显示方式，`n` 代表一个费用回复周期的总帧数。可选值有：<ul><li>`"0_to_n-1"`: 从0数到n-1 (程序员风格)。</li><li>`"0_to_n"`: 从0数到n-1，但总数显示为n。</li><li>`"1_to_n"`: 从1数到n (对多数用户更直观)。</li></ul> |

## 使用场景示例

### 场景一：我玩B服，它在我的MuMu多开器的第二个位置

1.  打开 `config.json` 文件。
2.  找到 `"instance_index"` 字段。
3.  将其值从 `0` 修改为 `1`。
    ```json
    "instance_index": 1,
    ```
4.  保存文件并重新启动程序。程序现在会尝试连接到你的第二个 MuMu 实例。

### 场景二：我想同时运行两个费用尺，分别用于两个不同的游戏客户端

1.  复制整个程序文件夹，得到两个独立的程序副本，例如 `CostRuler_Official` 和 `CostRuler_Bilibili`。
2.  在 `CostRuler_Official` 文件夹中，保持 `config.json` 不变（或者确保 `"api_port"` 是 `2606`）。
3.  在 `CostRuler_Bilibili` 文件夹中，打开 `config.json`。
4.  修改 `"instance_index"` 以指向 B 服客户端所在的模拟器实例（例如 `1`）。
5.  修改 `"api_port"` 为一个不同的端口号，例如 `2607`。
    ```json
    {
        "type": "mumu",
        "install_path": "...",
        "instance_index": 1,
        "api_port": 2607,
        "active_calibration_profile": null
    }
    ```
6.  现在你可以分别启动这两个 `.exe` 文件，它们将独立运行，互不影响。

